{% extends "base.html" %}
{% block head %}
<link rel="stylesheet" media="screen" href="{% static "css/handsontable.full.css"%}">
<link rel="stylesheet" media="screen" href="{% static "css/dataimport.css"%}">
<style>
    .uploader {
        text-align: center;
        margin: 80px 40px 280px;
    }
    .uploader .btn {
        padding: 19px 24px;
        font-size: 24px;
        font-weight: 200;
    }
    .uploader .fileInput {
        height: 0px;
        width: 0px;
        overflow:hidden;
    }
    .errors {
        display: none;
    }

    #hot {
        overflow: scroll;
    }

    .step-content {
        float: left;
    }

    .step-content .step-pane {
        display: none;
    }

    .step-content > .active {
        display: block;
    }

    .step-controls {
        margin-bottom: 20px;
    }

</style>
{% endblock %}
{% block content %}
<div class="row">
	<div class="span9">
		<h2><a href="{{collection.get_absolute_url}}">{{ collection.name }}</a> / Import metadata</h2>
        <div class="lead">Upload a .CSV file with image metadata. This file should contain a) column with filenames of images in this collection; b) column with subject ids; c) column with image types.</div>

	</div>
	<div class="span11"><hr/></div>
</div>

<div class="step-content">
    <div class="step-pane step1 active">
        <div class="row">
            <div class="span11">
                <div class="alert alert-error errors"></div>
            </div>
        </div>

        <div class="row">
            <div class="uploader span11">
                <a class="btn btn-primary btn-upload">Upload a .csv file</a>
                <input class="fileInput" name="file" type="file" />
            </div>
        </div>
    </div>
    <div class="step-pane step2">
        <div class="row">
            <div class="span11 step-controls">
                <a class="btn btn-default btn-step-pane-back"><i class="fa fa-chevron-left"></i> Back to a file upload</a>
                <a class="btn btn-primary pull-right btn-complete-import">Complete Import</a>
            </div>
        </div>
        <div class="row">
            <div class="span11">
                <div class="alert alert-info">
                    We've fuzzy matched some columns in your data with  predefined commonly used terms. Please check if the matching is correct.
                </div>
                <div class="alert alert-error errors"></div>
            </div>
        </div>
        <div class="row">
            <div class="span11">
                <div id="hot" class="handsontable"></div>
            </div>
        </div>
    </div>
</div>

<script src="{% static "scripts/handsontable.full.js"%}" type="text/javascript"></script>
<script src="{% static "scripts/papaparse.js"%}" type="text/javascript"></script>
<script src="{% static "scripts/fuse.js"%}" type="text/javascript"></script>
<script src="{% static "scripts/dataimport.js"%}" type="text/javascript"></script>
<script src="{% static "scripts/metadata-common.js"%}" type="text/javascript"></script>
<script src="{% static "scripts/metadata-import.js"%}" type="text/javascript"></script>
{% endblock %}
